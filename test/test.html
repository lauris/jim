<!doctype html>
<html>
  <head>
    <link rel="stylesheet" href="../vendor/qunit.css" type="text/css" media="screen" />
    <script type="text/javascript" src="../vendor/qunit.js"></script>
    <script type="text/javascript" src="../vendor/coffee-script.js"></script>
    <script type="text/javascript" src="../vendor/require.js"></script>
    <script type="text/javascript">
      require({
        paths: {
          jim: "../lib",
          test: ".",

          text: "../vendor/text",
          ace: "../vendor/ace/lib/ace",
          pilot: "../vendor/ace/support/pilot/lib/pilot",
        }
      });
    </script>


    <script type="text/coffeescript">
      @eq = strictEqual

      require ['ace/edit_session', 'ace/editor', 'ace/test/mockrenderer', 'jim/ace/module', 'text!test/fixtures/sort_by.js'], ->
        @EditSession = require('ace/edit_session').EditSession
        @Editor = require('ace/editor').Editor
        @MockRenderer = require 'ace/test/mockrenderer'
        @aceModule = require 'jim/ace/module'

        MockRenderer::setStyle = (->)
        MockRenderer::unsetStyle = (->)

        @js_code = require 'text!test/fixtures/sort_by.js'

        @setupAceTests = ->
          editor = new Editor(new MockRenderer(), new EditSession js_code)
          @jim = aceModule.startup env: {editor}
          @adaptor = @jim.adaptor
          @esc = 27
          @press = (keyGroups...) ->
            for keys in keyGroups
              switch typeof keys
                when 'number'
                  editor.onCommandKey {}, 0, keys
                when 'string'
                  editor.onTextInput char for char in keys

        CoffeeScript.load "#{name}.coffee" for name in [
          'ace/commands'
          'ace/motions'
          'ace/operators'
          'ace/insert_mode'
          'ace/visual_mode'
        ]
    </script>
  </head>
  <body>
    <h1 id="qunit-header">Jim's tests</h1>
    <h2 id="qunit-banner"></h2>
    <div id="qunit-testrunner-toolbar"></div>
    <h2 id="qunit-userAgent"></h2>
    <ol id="qunit-tests"></ol>
    <div id="qunit-fixture">test markup, will be hidden</div>
  </body>
</html>
